---
title: Введение в Spring Framework
date: 2024-01-12 09:00:00 +0300
categories: [Course, Spring]
tags: [spring-course]
---

## Введение

Spring Framework - это мощный и гибкий фреймворк, который имеет доминирующее положение для написания комплексных приложений используя языки программирования Java и Kotlin. Данный фреймворк предлагает разработчику комплексный инструментарий для создания высококачественных, легко тестируемых и масштабируемых приложений. Вот несколько ключевых особенностей, которые сделали Spring таким популярным:

- **Управление зависимостями:** Spring Framework вводит понятия "Dependency Injection (DI)" (Внедрение зависимостей) и "Inversion of Control (IoC)" (Инверсия контроля), позволяя забрать на себя заботу о создании, конфигурации и сборки компонентов (управление жизненным циклом), а также дает возможность создавать более модульные и тестируемые компоненты.
- **Универсальность:** Spring предлагает поддержку для различных типов приложений, начиная от монолитных веб-приложений и заканчивая микросервисами.
- **Абстракции для доступа к данным:** Spring предлагает удобные средства для работы с БД, а с приходом Spring Boot простые и удобные варианты построения SQL-запросов.
- **Аспектно-ориентированное программирование (AOP):** Позволяет отделять от бизнес-логики инфраструктурные/конфигурационные проблемы (логирование, безопасность или метрики приложения).
- **Непрерывное развитие:** Непрерывное развитие, улучшение и следование актуальным направлениям в разработке (развитие spring-boot, WebFlux, Spring Cloud и т.д.) позволяет удерживать Spring свою популярность среди разработчиков.
- **Обширное сообщество:** Огромное сообщество разработчиков и обилие учебных материалов делают изучение Spring доступным и практичным, что также удерживает и увеличивает его популярность.

В рамках этого курса мы погрузимся в мир Spring Framework, изучим его основные компоненты, принципы работы и конфигурации, узнаем как создавать RESTful Web-сервисы, защищать приложение с помощью Spring Security и многое другое.

## История Spring Framework

Как и почему был создан Spring? Какие проблемы он решал на момент своего создания? Почему до сих пор Spring остаётся лидером?
Spring Framework был создан в 2002 году Родом Джонсоном (Rod Johnson) и позднее состоялся его релиз в 2003 году. Он был задуман, как более лёгкая и гибкая альтернатива доминировавшей в то время Enterprise JavaBeans (EJB). Проблемы, которые Spring стремился решить на момент своего создания, включали упрощение копроративной разработки на Java, улучшение тестируемости, а также уменьшение связности между компонентами.

Для достижения необходимых улучшений были внедрены такие концепции, как Inversion of Control (IoC - инверсия контроля) и Dependency Injection (DI - внедрение зависимостей). Эти механизмы позволяют более гибко управлять созданием объектов и их жизненным циклом. Благодаря чему достигается уменьшается связность между компонентами и улучшается их тестируемость. Кроме того, Spring также предоставил унифицированный слой абстракции для управления транзакциями, который может работать с разнообразными API.

## Ключевые особенности Spring Framework

Давайте рассмотрим на примерах улучшения, которые предлагал Spring и начнём мы с базовых принципов - Dependency Injection & Inversion of Control.

### Dependency Injection & Inversion of Control

Давайте рассмотрим несколько примеров, как данный принцип применяется в Spring Framework и как будет выглядеть код без их использования.

#### Снижение связности между компонентами (DI & IoC)

**Без использования Spring, DI и IoC:**
```java
public class OrderService {
    private InventoryService inventoryService = new InventoryServiceImpl();

    public void processOrder(Order order) {
        if (inventoryService.isAvailable(order.getItem())) {
            // process the order
        }
    }
}
```
В примере выше `OrderService` сильно связан с конкретной реализацией `InventoryService`. Если мы захотим изменить `InventoryServiceImpl` на другую реализацию, то это потребует изменения кода в классе `OrderService`, что нарушает принцип открытости/закрытости __(ссылка на этот принцип)__

**С использованием Spring, DI и IoC:**
```java
public class OrderService {
    private InventoryService inventoryService;

    @Autowired
    public OrderService(InventoryService inventoryService) {
        this.inventoryService = inventoryService;
    }

    public void processOrder(Order order) {
        if (inventoryService.isAvailable(order.getItem())) {
            // process the order
        }
    }
}
```

В данном варианте `OrderService` опирается на интерфейс `InventoryService`, а конкретная реализация будет инъецирована по средством Spring-контейнера (используя IoC & DI). Такой вариант позволяет очень просто подменить реализацию `InventoryServiceImpl` на любую другую без изменений кода внутри `OrderService`.

#### Улучшение тестирования

**Без Spring, DI & IoC:**

Если мы захотим протестировать `OrderService`, то мы столкнёмся с трудностями, т.к. в тестируемом классе `OrderServiceTest` нам придётся напрямую инициировать `InventroyServiceImpl`, что в свою очередь усложняет изоляцию тестируемого сервиса от внутренних компонентов.

**С использованием Spring, DI и IoC:**

Используя DI можно "замокировать" зависимость на `InventoryService`, таким образом при написании теста мы можем фокусироваться только на поведении `OrderService`, не задумываясь о реализации `InventoryService`. Такой вариант улучшает поддерживаемость теста и уменьшает его сложность.

```java
public class OrderServiceTest {

    @Test
    public void testProcessOrder() {
        InventoryService mockInventoryService = mock(InventoryService.class);
        when(mockInventoryService.isAvailable(any(Item.class))).thenReturn(true);

        OrderService orderService = new OrderService(mockInventoryService);
        orderService.processOrder(new Order(...));

        // Asserts and verifications
        verify(mockInventoryService).isAvailable(any(Item.class));
    }
}
```

Таким образом, DI и IoC важны, поскольку они способствуют созданию программного обеспечения, которое является более удобным в обслуживании, масштабируемым и адаптируемым, что является критически важными качествами для разработки приложений корпоративного уровня.

### Абстракции для доступа к данным (JDBC, ORM, Transactions)

Spring предоставляет высокоуровневый слой абстракции для различных технологий доступа к данным, таким как: JDBC, Object-Relational Mapping (ORM), а также забирает на себя процесс управления транзакциями.

Каждая из абстракций предоставляет свои преимущества.

JDBC абстракция:
- Управление ресурсами: Spring 
